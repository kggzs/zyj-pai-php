# ğŸ” åˆ›å»ºç®¡ç†å‘˜è´¦å·

## ğŸ“ æ¦‚è¿°

`create_admin.php` æ˜¯ä¸€ä¸ªç”¨äºåˆ›å»ºç³»ç»Ÿç®¡ç†å‘˜è´¦å·çš„ä¸“ç”¨è„šæœ¬ã€‚è¯¥è„šæœ¬é‡‡ç”¨ä¸¤æ­¥éªŒè¯æœºåˆ¶ï¼Œç¡®ä¿åªæœ‰æˆæƒäººå‘˜æ‰èƒ½åˆ›å»ºç®¡ç†å‘˜è´¦å·ã€‚

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

### ğŸ”„ ä¸¤æ­¥éªŒè¯æœºåˆ¶

è„šæœ¬é‡‡ç”¨ä¸¤æ­¥éªŒè¯æµç¨‹ï¼Œæé«˜å®‰å…¨æ€§ï¼š

1. **ç¬¬ä¸€æ­¥ï¼šè„šæœ¬ä¸“å±å¯†ç éªŒè¯**
   - éœ€è¦è¾“å…¥é¢„è®¾çš„è„šæœ¬ä¸“å±å¯†ç 
   - éªŒè¯æˆåŠŸåè¿›å…¥ç¬¬äºŒæ­¥
   - éªŒè¯çŠ¶æ€ä¿å­˜åœ¨ Session ä¸­ï¼Œæœ‰æ•ˆæœŸä¸º 10 åˆ†é’Ÿ

2. **ç¬¬äºŒæ­¥ï¼šåˆ›å»ºç®¡ç†å‘˜è´¦å·**
   - è¾“å…¥ç®¡ç†å‘˜ç”¨æˆ·åã€å¯†ç ã€é‚®ç®±
   - æ‰€æœ‰å­—æ®µå‡ä¸ºå¿…å¡«é¡¹
   - åˆ›å»ºæˆåŠŸåè‡ªåŠ¨æ¸…é™¤éªŒè¯çŠ¶æ€

### ğŸ›¡ï¸ å®‰å…¨ç‰¹æ€§

#### ğŸ”’ å¯†ç ä¿æŠ¤

- è„šæœ¬ä¸“å±å¯†ç åœ¨æ–‡ä»¶é¡¶éƒ¨å®šä¹‰ï¼š`SCRIPT_PASSWORD`
- **é‡è¦æç¤º**ï¼šéƒ¨ç½²å‰å¿…é¡»ä¿®æ”¹é»˜è®¤å¯†ç 
- é»˜è®¤å¯†ç ï¼š`Admin2024Secure!@#`

#### ğŸ“Š Session éªŒè¯

- ä½¿ç”¨ Session ä¿å­˜éªŒè¯çŠ¶æ€
- éªŒè¯çŠ¶æ€æœ‰æ•ˆæœŸä¸º 10 åˆ†é’Ÿ
- è¶…æ—¶åéœ€è¦é‡æ–°éªŒè¯è„šæœ¬ä¸“å±å¯†ç 

#### âœ… è¾“å…¥éªŒè¯

- **ç”¨æˆ·åéªŒè¯**ï¼š
  - é•¿åº¦ï¼š3-20 ä¸ªå­—ç¬¦
  - æ ¼å¼ï¼šåªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿
  - å”¯ä¸€æ€§ï¼šæ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å·²å­˜åœ¨

- **å¯†ç éªŒè¯**ï¼š
  - ä½¿ç”¨ `Security::validatePasswordStrength()` éªŒè¯å¯†ç å¼ºåº¦
  - å¦‚æœ Security ç±»ä¸å¯ç”¨ï¼Œåˆ™ä½¿ç”¨ç®€å•éªŒè¯ï¼ˆè‡³å°‘ 6 ä¸ªå­—ç¬¦ï¼‰
  - å‰ç«¯å®æ—¶æ˜¾ç¤ºå¯†ç å¼ºåº¦ï¼ˆå¼±/ä¸­/å¼ºï¼‰

- **é‚®ç®±éªŒè¯**ï¼š
  - ä½¿ç”¨ PHP `filter_var()` éªŒè¯é‚®ç®±æ ¼å¼
  - æ£€æŸ¥é‚®ç®±æ˜¯å¦å·²è¢«ä½¿ç”¨

### ğŸ“‹ è´¦å·å±æ€§

åˆ›å»ºçš„ç®¡ç†å‘˜è´¦å·å…·æœ‰ä»¥ä¸‹é»˜è®¤å±æ€§ï¼š

- **ç®¡ç†å‘˜æƒé™**ï¼š`is_admin = 1`
- **VIP çŠ¶æ€**ï¼š`is_vip = 1`ï¼ˆæ°¸ä¹… VIPï¼‰
- **VIP åˆ°æœŸæ—¶é—´**ï¼š`vip_expire_time = NULL`ï¼ˆæ°¸ä¹…æœ‰æ•ˆï¼‰
- **è´¦å·çŠ¶æ€**ï¼š`status = 1`ï¼ˆæ­£å¸¸ï¼‰
- **é‚®ç®±éªŒè¯**ï¼š`email_verified = 1`ï¼ˆå·²éªŒè¯ï¼‰
- **åˆå§‹ç§¯åˆ†**ï¼š`points = 0`

### ğŸ–¥ï¸ ç”¨æˆ·ç•Œé¢

#### ğŸ“Œ æ­¥éª¤æŒ‡ç¤ºå™¨

é¡µé¢é¡¶éƒ¨æ˜¾ç¤ºå½“å‰æ­¥éª¤ï¼š
- æ­¥éª¤ 1ï¼šéªŒè¯å¯†ç 
- æ­¥éª¤ 2ï¼šåˆ›å»ºè´¦å·

#### ğŸ’¡ ä¿¡æ¯æç¤ºæ¡†

- è“è‰²æç¤ºæ¡†æ˜¾ç¤ºæ“ä½œè¯´æ˜
- é”™è¯¯ä¿¡æ¯ä»¥çº¢è‰²æ˜¾ç¤º
- æˆåŠŸä¿¡æ¯ä»¥ç»¿è‰²æ˜¾ç¤º

#### ğŸ“Š å¯†ç å¼ºåº¦æ£€æµ‹

- å®æ—¶æ˜¾ç¤ºå¯†ç å¼ºåº¦ï¼ˆå¼±/ä¸­/å¼ºï¼‰
- ä½¿ç”¨é¢œè‰²æ¡æ˜¾ç¤ºå¼ºåº¦ç­‰çº§
- å¼ºåº¦åˆ¤æ–­æ ‡å‡†ï¼š
  - é•¿åº¦ â‰¥ 6 å­—ç¬¦
  - é•¿åº¦ â‰¥ 8 å­—ç¬¦
  - åŒ…å«å¤§å°å†™å­—æ¯
  - åŒ…å«æ•°å­—
  - åŒ…å«ç‰¹æ®Šå­—ç¬¦

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. ä¿®æ”¹è„šæœ¬ä¸“å±å¯†ç 

åœ¨éƒ¨ç½²å‰ï¼Œå¿…é¡»ä¿®æ”¹ `create_admin.php` æ–‡ä»¶ä¸­çš„è„šæœ¬ä¸“å±å¯†ç ï¼š

```php
define('SCRIPT_PASSWORD', 'Admin2024Secure!@#'); // è¯·ä¿®æ”¹æ­¤å¯†ç 
```

å»ºè®®ä½¿ç”¨å¼ºå¯†ç ï¼ŒåŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦ã€‚

### 2. è®¿é—®åˆ›å»ºé¡µé¢

åœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š

```
http://your-domain/create_admin.php
```

### 3. ç¬¬ä¸€æ­¥ï¼šéªŒè¯è„šæœ¬ä¸“å±å¯†ç 

- è¾“å…¥è„šæœ¬ä¸“å±å¯†ç 
- ç‚¹å‡»"ä¸‹ä¸€æ­¥"æŒ‰é’®
- éªŒè¯æˆåŠŸåè¿›å…¥ç¬¬äºŒæ­¥

### 4. ç¬¬äºŒæ­¥ï¼šåˆ›å»ºç®¡ç†å‘˜è´¦å·

å¡«å†™ä»¥ä¸‹ä¿¡æ¯ï¼š

- **ç”¨æˆ·å**ï¼š3-20 ä¸ªå­—ç¬¦ï¼Œåªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿
- **å¯†ç **ï¼šç¬¦åˆå¯†ç å¼ºåº¦è¦æ±‚
- **é‚®ç®±**ï¼šæœ‰æ•ˆçš„é‚®ç®±åœ°å€

ç‚¹å‡»"åˆ›å»ºç®¡ç†å‘˜è´¦å·"æŒ‰é’®å®Œæˆåˆ›å»ºã€‚

## âš ï¸ æ³¨æ„äº‹é¡¹

### ğŸ”’ å®‰å…¨å»ºè®®

1. **ä¿®æ”¹é»˜è®¤å¯†ç **ï¼šéƒ¨ç½²å‰å¿…é¡»ä¿®æ”¹è„šæœ¬ä¸“å±å¯†ç 
2. **é™åˆ¶è®¿é—®**ï¼šå»ºè®®é€šè¿‡ IP ç™½åå•æˆ– .htaccess é™åˆ¶è®¿é—®
3. **ä½¿ç”¨ååˆ é™¤**ï¼šåˆ›å»ºç®¡ç†å‘˜è´¦å·åï¼Œå»ºè®®åˆ é™¤æˆ–é‡å‘½åæ­¤æ–‡ä»¶
4. **HTTPS è®¿é—®**ï¼šå¿…é¡»é€šè¿‡ HTTPS è®¿é—®æ­¤é¡µé¢ï¼ˆæ ¸å¿ƒåŠŸèƒ½å¿…é¡»åœ¨HTTPSä¸‹æ‰å¯ä½¿ç”¨ï¼Œæœ¬åœ°æµ‹è¯•é™¤å¤–ï¼‰

### âŒ é”™è¯¯å¤„ç†

å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ³•ï¼š

- **"è„šæœ¬ä¸“å±å¯†ç ä¸æ­£ç¡®ï¼"**ï¼šæ£€æŸ¥è¾“å…¥çš„å¯†ç æ˜¯å¦æ­£ç¡®
- **"éªŒè¯å·²è¿‡æœŸ"**ï¼šéªŒè¯çŠ¶æ€è¶…è¿‡ 10 åˆ†é’Ÿï¼Œéœ€è¦é‡æ–°éªŒè¯
- **"ç”¨æˆ·åå·²å­˜åœ¨ï¼"**ï¼šè¯¥ç”¨æˆ·åå·²è¢«ä½¿ç”¨ï¼Œè¯·é€‰æ‹©å…¶ä»–ç”¨æˆ·å
- **"è¯¥é‚®ç®±å·²è¢«ä½¿ç”¨ï¼"**ï¼šè¯¥é‚®ç®±å·²è¢«æ³¨å†Œï¼Œè¯·ä½¿ç”¨å…¶ä»–é‚®ç®±
- **"å¯†ç é•¿åº¦è‡³å°‘6ä¸ªå­—ç¬¦ï¼"**ï¼šå¯†ç ä¸ç¬¦åˆå¼ºåº¦è¦æ±‚

### ğŸ—„ï¸ æ•°æ®åº“è¦æ±‚

ç¡®ä¿æ•°æ®åº“è¡¨ `users` å·²æ­£ç¡®åˆ›å»ºï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š

- `username`ï¼šç”¨æˆ·å
- `password`ï¼šå¯†ç ï¼ˆå“ˆå¸Œå€¼ï¼‰
- `email`ï¼šé‚®ç®±
- `email_verified`ï¼šé‚®ç®±éªŒè¯çŠ¶æ€
- `register_ip`ï¼šæ³¨å†Œ IP
- `register_ua`ï¼šæ³¨å†Œ User-Agent
- `register_time`ï¼šæ³¨å†Œæ—¶é—´
- `last_login_time`ï¼šæœ€åç™»å½•æ—¶é—´
- `status`ï¼šè´¦å·çŠ¶æ€
- `is_admin`ï¼šæ˜¯å¦ç®¡ç†å‘˜
- `points`ï¼šç§¯åˆ†
- `is_vip`ï¼šæ˜¯å¦ VIP
- `vip_expire_time`ï¼šVIP åˆ°æœŸæ—¶é—´

## ğŸ› ï¸ æŠ€æœ¯å®ç°

### ğŸ§° æ ¸å¿ƒç±»ä¾èµ–

- `Database`ï¼šæ•°æ®åº“æ“ä½œ
- `Security`ï¼šå®‰å…¨åŠŸèƒ½ï¼ˆå¯†ç éªŒè¯ã€IP è·å–ï¼‰
- `Helper`ï¼šè¾…åŠ©å‡½æ•°ï¼ˆé¡¹ç›®åç§°è·å–ï¼‰

### ğŸ“Š Session ç®¡ç†

```php
// ä¿å­˜éªŒè¯çŠ¶æ€
$_SESSION['admin_create_verified'] = true;
$_SESSION['admin_create_verified_time'] = time();

// æ£€æŸ¥éªŒè¯çŠ¶æ€ï¼ˆ10åˆ†é’Ÿè¶…æ—¶ï¼‰
if (time() - $_SESSION['admin_create_verified_time'] > 600) {
    // éªŒè¯å·²è¿‡æœŸ
}
```

### ğŸ” å¯†ç å“ˆå¸Œ

ä½¿ç”¨ PHP `password_hash()` å‡½æ•°ç”Ÿæˆå¯†ç å“ˆå¸Œï¼š

```php
$hashedPassword = password_hash($password, PASSWORD_DEFAULT);
```

### ğŸ“ è´¦å·åˆ›å»º SQL

```sql
INSERT INTO users (
    username, password, email, email_verified,
    register_ip, register_ua, register_time, last_login_time,
    status, is_admin, points, is_vip, vip_expire_time
) VALUES (?, ?, ?, 1, ?, ?, ?, ?, 1, 1, 0, 1, NULL)
```

## ğŸ“ ç›¸å…³æ–‡ä»¶

- `admin_login.php`ï¼šç®¡ç†å‘˜ç™»å½•é¡µé¢
- `admin.php`ï¼šç®¡ç†å‘˜åå°é¡µé¢
- `core/Security.php`ï¼šå®‰å…¨åŠŸèƒ½ç±»
- `core/Database.php`ï¼šæ•°æ®åº“æ“ä½œç±»

## ğŸ“… æ›´æ–°æ—¥å¿—

- åˆå§‹ç‰ˆæœ¬ï¼šæ”¯æŒä¸¤æ­¥éªŒè¯åˆ›å»ºç®¡ç†å‘˜è´¦å·
- è‡ªåŠ¨è®¾ç½®ä¸ºæ°¸ä¹… VIP ä¼šå‘˜
- æ”¯æŒå¯†ç å¼ºåº¦æ£€æµ‹
- æ”¯æŒç”¨æˆ·åå’Œé‚®ç®±æ ¼å¼éªŒè¯

